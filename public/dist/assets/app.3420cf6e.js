import{c as A,o as i,a as m,b as s,t as x,n as b,w as z,v as H,u as o,i as K,d as B,e as R,s as T,f as O,g as c,h as w,r as C,j as y,k as h,l as D,F as E,m as M,p as q,q as P,x as W,y as J,z as U,A as Q,B as X,C as Y,D as Z,E as ee,_ as te,G as se,T as ae,H as re,I as oe,J as ne,K as ie,L as le,M as j,N as ue,O as ce,P as de,Q as me}from"./vendor.80495a89.js";const he=["for"],pe=["id","name","type","autocomplete","required","placeholder"],N={props:{modelValue:{type:String,default:""},name:{type:String,required:!0},label:{type:String,default:""},type:{type:String,default:"text"},showLabel:{type:Boolean,default:!0},required:{type:Boolean,default:!1},placeholder:{type:String,default:null},autocomplete:{type:String,default:null},inputClass:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,r=A({get:()=>a.modelValue,set:n=>t("update:modelValue",n)});return(n,l)=>(i(),m("div",null,[s("label",{for:e.name,class:b(["text-sm text-gray-500",{"sr-only":!e.showLabel}])},x(e.label),11,he),z(s("input",{id:e.name,name:e.name,"onUpdate:modelValue":l[0]||(l[0]=u=>K(r)?r.value=u:null),type:e.type,autocomplete:e.autocomplete,required:e.required,class:b([[e.inputClass],"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm"]),placeholder:e.placeholder},null,10,pe),[[H,o(r)]])]))}},f=B.create({baseURL:"https://safe-scrubland-88163.herokuapp.com/api/v1",withCredentials:!0});f.interceptors.request.use(e=>{const t=g();return t.user.token&&(e.headers.Authorization=`Bearer ${t.user.token}`),e});f.interceptors.response.use(e=>e,e=>{const t=g();return e.response&&[401,419].includes(e.response.status)&&t.user.token&&t.logout(),Promise.reject(e)});const k=B.create({baseURL:"https://safe-scrubland-88163.herokuapp.com/api/v1",withCredentials:!0});k.interceptors.response.use(e=>e,e=>{const t=g();return e.response&&[401,419].includes(e.response.status)&&t.user.token&&t.logout(),Promise.reject(e)});var L={async logout(){return f.post("/logout")},async registerUser(e){return await k.get("/sanctum/csrf-cookie"),k.post("/register",e)},async login(e){return await k.get("/sanctum/csrf-cookie"),k.post("/login",e)}};const Nt=R("main",{state:()=>({dashboard:{loading:!1,data:{}}}),getters:{},actions:{async getDashboardData(){this.dashboard.loading=!0;try{const{data:e}=await f.get("/dashboard");this.dashboard.data=e,this.dashboard.loading=!1}catch(e){throw this.dashboard.loading=!1,e}}}}),fe=R("auth",{state:()=>({user:{data:{},token:sessionStorage.getItem("TOKEN")},error:null}),getters:{getUser:e=>e.user.data},actions:{async logout(){await L.logout(),this.user.data={},this.user.token=null,sessionStorage.removeItem("TOKEN")},async registerUser(e){const{data:t}=await L.registerUser(e);this.user.data=t.data.user,this.user.token=t.data.token,sessionStorage.setItem("TOKEN",t.data.token)},async login(e){const{data:t}=await L.login(e);this.user.data=t.data.user,this.user.token=t.data.token,sessionStorage.setItem("TOKEN",t.data.token)}}});var g=fe;const _e=R("survey",{state:()=>({surveys:{loading:!1,links:[],data:[]},currentSurvey:{loading:!1,data:null},questionTypes:["text","select","radio","checkbox","textarea"],notification:{show:!1,message:null,type:null}}),getters:{},actions:{async saveSurvey(e){this.currentSurvey.loading=!0,delete e.image_url;try{if(e.id){const{data:t}=await f.put(`/surveys/${e.id}`,e);return this.currentSurvey.data=t.data,this.surveys.data=this.surveys.data.map(a=>a.id===t.data.id?t.data:a),this.currentSurvey.loading=!1,t}else{const{data:t}=await f.post("/surveys",e);return this.currentSurvey.data=t.data,this.surveys.data=[...this.surveys.data,t.data],this.currentSurvey.loading=!1,t}}catch(t){throw this.currentSurvey.loading=!1,t}},async getSurvey(e){this.currentSurvey.loading=!0;try{const{data:t}=await f.get(`/surveys/${e}`);return this.currentSurvey.data=t.data,this.currentSurvey.loading=!1,t}catch(t){throw this.currentSurvey.loading=!1,t}},async deleteSurvey(e){try{if((await f.delete(`/surveys/${e.id}`)).status!==204)throw new Error("Survey can't be removed.");return this.surveys.data=this.surveys.data.filter(a=>a.id!==e.id),this.currentSurvey.data={},!0}catch(t){throw t}},async getSurveys({url:e=null}={}){e=e||"/surveys",this.surveys.loading=!0;try{const{data:t}=await f.get(e);this.surveys.data=t.data,this.surveys.links=t.meta.links,this.surveys.loading=!1}catch(t){throw this.surveys.loading=!1,t}},notify({message:e,type:t}){this.notification.show=!0,this.notification.type=t,this.notification.message=e,setTimeout(()=>this.notification.show=!1,3e3)},async getSurveyBySlug(e){this.currentSurvey.loading=!0;try{const{data:t}=await f.get(`/survey-by-slug/${e}`);return this.currentSurvey.data=t.data,this.currentSurvey.loading=!1,t}catch(t){throw this.currentSurvey.loading=!1,t}},async saveSurveyAnswers({surveyId:e,answers:t}){this.currentSurvey.loading=!0;try{await f.post(`/surveys/${e}/answers`,{answers:t}),this.currentSurvey.loading=!1}catch(a){throw this.currentSurvey.loading=!1,a}}}}),ye={setup(e){const t=_e(),{notification:a}=T(t),r=A(()=>({"bg-emerald-500":a.value.type==="success","bg-red-500":a.value.type==="error"}));return(n,l)=>o(a).show?(i(),m("div",{key:0,class:b(["fixed w-[18rem] left-4 bottom-4 py-2 px-4 text-white animate-fade-in-down",o(r)])},x(o(a).message),3)):O("",!0)}};var S=(e,t)=>{const a=e.__vccOpts||e;for(const[r,n]of t)a[r]=n;return a};const ge={},ve={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},xe=s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),be=s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),we=[xe,be];function ke(e,t){return i(),m("svg",ve,we)}var F=S(ge,[["render",ke]]);const Se={class:"flex items-center justify-center"},$e={class:"inline-flex px-4 py-2 font-semibold text-sm shadow rounded-md text-white bg-indigo-500"},Ee=w(" loading... "),Ae={setup(e){return(t,a)=>(i(),m("div",Se,[s("div",$e,[c(o(F),{class:"animate-spin -ml-1 mr-3 h-5 w-5"}),Ee])]))}},Ce={},Ve={class:"flex items-center justify-between py-3 px-5 bg-red-500 text-white rounded"};function Le(e,t){return i(),m("div",Ve,[C(e.$slots,"default")])}var Oe=S(Ce,[["render",Le]]);const De={class:"list-disc"},Re={props:{errors:Object},emits:["close"],setup(e,{emit:t}){const{errors:a}=e,r=A(()=>Object.keys(a).reduce((n,l)=>[...n,...a[l]],[]));return(n,l)=>(i(),y(o(Oe),{class:"flex items-center justify-center text-sm"},{default:h(()=>[s("ul",De,[(i(!0),m(E,null,D(o(r),(u,_)=>(i(),m("li",{key:_},x(u),1))),128))]),s("span",{onClick:l[0]||(l[0]=u=>t("close")),class:"w-8 h-8 flex items-center justify-center rounded-full transition-colors cursor-pointer hover:bg-black/20"},[c(o(M),{class:"h-6 w-6"})])]),_:1}))}},Te={setup(e){const t="default",{currentRoute:a}=q(),r=A(()=>`${a.value.meta.layout||t}-layout`);return(n,l)=>{const u=P("router-view");return i(),y(W(o(r)),null,{default:h(()=>[c(u),c(o(ye))]),_:1})}}},qe="modulepreload",I={},Pe="https://safe-scrubland-88163.herokuapp.com/dist/",v=function(t,a){return!a||a.length===0?t():Promise.all(a.map(r=>{if(r=`${Pe}${r}`,r in I)return;I[r]=!0;const n=r.endsWith(".css"),l=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${l}`))return;const u=document.createElement("link");if(u.rel=n?"stylesheet":qe,n||(u.as="script",u.crossOrigin=""),u.href=r,document.head.appendChild(u),n)return new Promise((_,p)=>{u.addEventListener("load",_),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())},Ue={class:"text-2xl font-bold"},je={setup(e){const t=g();return T(t),(a,r)=>(i(),m("h1",Ue,"Home"))}},Ne=s("img",{class:"mx-auto h-12 w-auto",src:"https://tailwindui.com/img/logos/workflow-mark-indigo-600.svg",alt:"Workflow"},null,-1),Ie=s("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"},"Sign in to your account",-1),ze={class:"mt-2 text-center text-sm text-gray-600"},Be=w(" Register for free "),Fe=["onSubmit"],Ge={class:"rounded-md shadow-sm -space-y-px"},He={class:"flex items-center justify-between"},Ke={class:"flex items-center"},Me=s("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Remember me ",-1),We=["disabled"],Je={class:"absolute left-0 inset-y-0 flex items-center pl-3"},Qe=w(" Sign in "),Xe={setup(e){const t=q(),a=g(),r=J({email:null,password:null,remember:!1}),n=U(!1),l=U({});async function u(){n.value=!0,l.value={};try{await a.login(r),n.value=!1,t.push({name:"Dashboard"})}catch(_){(_.response.status=422)&&(l.value=_.response.data.errors),n.value=!1}}return(_,p)=>{const V=P("router-link");return i(),m(E,null,[s("div",null,[Ne,Ie,s("p",ze,[c(V,{to:{name:"Register"},class:"font-medium text-indigo-600 hover:text-indigo-500"},{default:h(()=>[Be]),_:1})])]),s("form",{class:"mt-8 space-y-6",onSubmit:Y(u,["prevent"]),method:"POST",novalidate:""},[Object.keys(l.value).length?(i(),y(o(Re),{key:0,errors:l.value,onClose:p[0]||(p[0]=d=>l.value={})},null,8,["errors"])):O("",!0),s("div",Ge,[c(o(N),{type:"email",label:"Email Address",name:"email",required:"",modelValue:o(r).email,"onUpdate:modelValue":p[1]||(p[1]=d=>o(r).email=d),inputClass:"rounded-t-md",placeholder:"Email Address",autocomplete:"email",showLabel:!1},null,8,["modelValue"]),c(o(N),{type:"password",label:"Password",name:"password",required:"",modelValue:o(r).password,"onUpdate:modelValue":p[2]||(p[2]=d=>o(r).password=d),inputClass:"rounded-b-md",placeholder:"Password",showLabel:!1},null,8,["modelValue"])]),s("div",He,[s("div",Ke,[z(s("input",{id:"remember-me",name:"remember-me","onUpdate:modelValue":p[3]||(p[3]=d=>o(r).remember=d),type:"checkbox",class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,512),[[Q,o(r).remember]]),Me])]),s("div",null,[s("button",{type:"submit",disabled:n.value,class:b(["group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",{"cursor-not-allowed":n.value,"hover:bg-indigo-500":n.value}])},[s("span",Je,[c(o(X),{class:"h-5 w-5 text-indigo-500 group-hover:text-indigo-400","aria-hidden":"true"})]),n.value?(i(),y(o(F),{key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5"})):O("",!0),Qe],10,We)])],40,Fe)],64)}}},Ye={},Ze={class:"text-2xl font-bold"};function et(e,t){return i(),m("h1",Ze,"Not Found 404!")}var tt=S(Ye,[["render",et]]);const st={},at={class:"text-2xl font-bold"};function rt(e,t){return i(),m("h1",at,"Not Authorized!")}var ot=S(st,[["render",rt]]),nt=[{path:"/",name:"Home",component:je},{path:"/login",name:"Login",meta:{isGuest:!0,layout:"auth"},component:Xe},{path:"/register",name:"Register",meta:{isGuest:!0,layout:"auth"},component:()=>v(()=>import("./Register.816723a6.js"),["assets/Register.816723a6.js","assets/vendor.80495a89.js"])},{path:"/about",name:"About",component:()=>v(()=>import("./About.82143190.js"),["assets/About.82143190.js","assets/vendor.80495a89.js"])},{path:"/dashboard",name:"Dashboard",meta:{requiresAuth:!0},component:()=>v(()=>import("./Dashboard.14e9b6fb.js"),["assets/Dashboard.14e9b6fb.js","assets/vendor.80495a89.js","assets/PageComponent.0dfdb2b5.js"])},{path:"/surveys/create",name:"SurveyCreate",meta:{requiresAuth:!0},component:()=>v(()=>import("./SurveyView.7f325144.js"),["assets/SurveyView.7f325144.js","assets/vendor.80495a89.js","assets/PageComponent.0dfdb2b5.js"])},{path:"/surveys/:id",name:"SurveyView",meta:{requiresAuth:!0},component:()=>v(()=>import("./SurveyView.7f325144.js"),["assets/SurveyView.7f325144.js","assets/vendor.80495a89.js","assets/PageComponent.0dfdb2b5.js"])},{path:"/surveys",name:"Surveys",meta:{requiresAuth:!0},component:()=>v(()=>import("./Surveys.248854c8.js"),["assets/Surveys.248854c8.js","assets/vendor.80495a89.js","assets/PageComponent.0dfdb2b5.js"])},{path:"/view/survey/:slug",name:"SurveyPublicView",meta:{layout:"empty"},component:()=>v(()=>import("./SurveyPublicView.93999ef6.js"),["assets/SurveyPublicView.93999ef6.js","assets/vendor.80495a89.js"])},{path:"/unauthorized",name:"Unauthorized",meta:{layout:"empty"},component:ot},{path:"/:catchAll(.*)",name:"NotFound",meta:{layout:"empty"},component:tt}];const G=Z({history:ee(),routes:nt,scrollBehavior(e,t,a){return a||{x:0,y:0}}});G.beforeEach((e,t,a)=>{const r=g();e.meta.requiresAuth&&!r.user.token?a({name:"Login"}):r.user.token&&e.meta.isGuest?a({name:"Dashboard"}):a()});const it={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},lt={class:"flex items-center justify-between h-16"},ut={class:"flex items-center"},ct=s("div",{class:"flex-shrink-0"},[s("img",{class:"h-8 w-8",src:"https://tailwindui.com/img/logos/workflow-mark-indigo-500.svg",alt:"Workflow"})],-1),dt={class:"hidden md:block"},mt={class:"ml-10 flex items-baseline space-x-4"},ht={class:"hidden md:block"},pt={class:"ml-4 flex items-center md:ml-6"},ft=s("span",{class:"sr-only"},"Open user menu",-1),_t=["src"],yt={class:"-mr-2 flex md:hidden"},gt=s("span",{class:"sr-only"},"Open main menu",-1),vt={class:"px-2 pt-2 pb-3 space-y-1 sm:px-3"},xt={class:"pt-4 pb-3 border-t border-gray-700"},bt={class:"flex items-center px-5"},wt={class:"flex-shrink-0"},kt=["src"],St={class:"ml-3"},$t={class:"text-base font-medium leading-none text-white"},Et={class:"text-sm font-medium leading-none text-gray-400"},At={class:"mt-3 px-2 space-y-1"},Ct=w(" Sign out "),Vt={setup(e){const t=g(),a=q(),r=t.getUser,n=[{name:"Dashboard",to:{name:"Dashboard"}},{name:"Surveys",to:{name:"Surveys"}}];async function l(){try{await t.logout(),a.push({name:"Login"})}catch(u){}}return(u,_)=>{const p=P("router-link");return i(),y(o(ce),{as:"nav",class:"bg-gray-800"},{default:h(({open:V})=>[s("div",it,[s("div",lt,[s("div",ut,[ct,s("div",dt,[s("div",mt,[(i(),m(E,null,D(n,d=>c(p,{key:d.name,to:d.to,"active-class":"bg-gray-900 text-white",class:b([u.$route.name===d.to.name?"":"text-gray-300 hover:bg-gray-700 hover:text-white","px-3 py-2 rounded-md text-sm font-medium"])},{default:h(()=>[w(x(d.name),1)]),_:2},1032,["to","class"])),64))])])]),s("div",ht,[s("div",pt,[c(o(ne),{as:"div",class:"ml-3 relative"},{default:h(()=>[s("div",null,[c(o(te),{class:"max-w-xs bg-gray-800 rounded-full flex items-center text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white"},{default:h(()=>[ft,o(r).imageUrl?(i(),m("img",{key:0,class:"h-8 w-8 rounded-full",src:o(r).imageUrl,alt:""},null,8,_t)):(i(),y(o(se),{key:1,class:"h-8 w-8 text-gray-200"}))]),_:1})]),c(ae,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:h(()=>[c(o(re),{class:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:h(()=>[c(o(oe),null,{default:h(({active:d})=>[s("a",{onClick:l,class:"cursor-pointer block px-4 py-2 text-sm text-gray-700"}," Sign out ")]),_:1})]),_:1})]),_:1})]),_:1})])]),s("div",yt,[c(o(j),{class:"bg-gray-800 inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white"},{default:h(()=>[gt,V?(i(),y(o(le),{key:1,class:"block h-6 w-6","aria-hidden":"true"})):(i(),y(o(ie),{key:0,class:"block h-6 w-6","aria-hidden":"true"}))]),_:2},1024)])])]),c(o(ue),{class:"md:hidden"},{default:h(()=>[s("div",vt,[(i(),m(E,null,D(n,d=>c(p,{key:d.name,to:d.to,"active-class":"bg-gray-900 text-white",class:b([u.$route.name===d.to.name?"":"text-gray-300 hover:bg-gray-700 hover:text-white","block px-3 py-2 rounded-md text-sm font-medium"])},{default:h(()=>[w(x(d.name),1)]),_:2},1032,["to","class"])),64))]),s("div",xt,[s("div",bt,[s("div",wt,[s("img",{class:"h-10 w-10 rounded-full",src:o(r).imageUrl,alt:""},null,8,kt)]),s("div",St,[s("div",$t,x(o(r).name),1),s("div",Et,x(o(r).email),1)])]),s("div",At,[c(o(j),{as:"a",onClick:l,class:"block px-3 py-2 rounded-md text-base font-medium text-gray-400 hover:text-white hover:bg-gray-700 cursor-pointer"},{default:h(()=>[Ct]),_:1})])])]),_:1})]),_:1})}}},Lt={class:"min-h-full"},Ot={setup(e){return(t,a)=>(i(),m("div",Lt,[c(Vt),C(t.$slots,"default")]))}},Dt={};function Rt(e,t){return C(e.$slots,"default")}var Tt=S(Dt,[["render",Rt]]);const qt={class:"min-h-full flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},Pt={class:"max-w-md w-full space-y-8"},Ut={setup(e){const t=g();return T(t),(a,r)=>(i(),m("div",qt,[s("div",Pt,[C(a.$slots,"default")])]))}};const $=de(Te).use(me()).use(G);$.component("default-layout",Ot);$.component("auth-layout",Ut);$.component("empty-layout",Tt);$.component("loading-component",Ae);$.mount("#app");export{F as L,N as _,Re as a,S as b,Nt as c,_e as d,g as u};
